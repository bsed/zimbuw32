<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<style type="text/css">
body {
font-family: arial,sans-serif;
}
.keyword {
  color: #774400;
}
.type {
  color: #227722;
}
.attribute {
  color: #990077;
}
.typehref {
  color: #227722;
  text-decoration: underline;
}
.example {
  background-color: #EEFFCC;
  border-color: #88AA66;
  border-style: solid none;
  border-width: 1px medium;
  padding: 5px;
}
.commentcode {
  font-family: monospace;
  background-color: #EEFFCC;
}
.ptext {
  margin-top: 3px;
  margin-bottom: 3px;
}
.pheader {
  margin-bottom: 3px;
}
small {
  font-size: 60%;
}
.nowrap {
  white-space: nowrap;
  vertical-align: top;
}
</style>

<title>Z module - Zimbu documentation</title>
</head><body>
<table width='500'><tr><td>
</td><td>
&nbsp;&nbsp;&nbsp;
</td><td>
<A href='index.html'>index</A>
</td><td align='right' width='90%'>
<A href='http://www.zimbu.org/documentation'>Zimbu documentation</A>
</td></tr></table>
<h1><span class='keyword'>MODULE</span> Z
<span class='attribute'><small> @public</small></span></h1>
<h2>summary</h2>
<table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>
<p class='ptext'> Items built into the compiler.
</p>
<table><tr><td align='right'><span class='keyword'>CLASS</span>&nbsp;</td><td class='nowrap'><A href='Z.Pos.html'><b>Pos</b></A><span class='attribute'><small> @public</small></span>&nbsp;</td><td> Class that stores the line/column position in a file.
</td>
</tr>
<tr><td align='right'><span class='keyword'>ENUM</span>&nbsp;</td><td class='nowrap'><A href='Z.FinishReason.html'><b>FinishReason</b></A><span class='attribute'><small> @public</small></span>&nbsp;</td><td> Argument to Finish(): why it was called.
</td>
</tr>
<tr><td>&nbsp;</td></tr><tr><td align='right'><small><span class='type'><A class='typehref' href='STRING.string.html'>string</A></span></small>&nbsp;</td><td class='nowrap'><A href='Z.html#lang'><b>lang</b></A><span class='attribute'><small> @public</small></span>&nbsp;</td><td> The language currently being generated: "C" or "JS"
</td>
</tr>
<tr><td align='right'><small><span class='type'><A class='typehref' href='BOOL.bool.html'>bool</A></span></small>&nbsp;</td><td class='nowrap'><A href='Z.html#exiting'><b>exiting</b></A><span class='attribute'><small> @public</small></span>&nbsp;</td><td> Set to TRUE when exiting the program.
</td>
</tr>
<tr><td>&nbsp;</td></tr><tr><td align='right'></td><td class='nowrap'><A href='Z.html#pos'><b>pos</b></a>(<small></small>) <small><span class='type'><A class='typehref' href='Z.Pos.html'>Z.Pos</A></span></small><span class='attribute'><small> @public</small></span>&nbsp;</td>
<td> Return the current position in the code.
</td>
</tr>
<tr><td align='right'></td><td class='nowrap'><A href='Z.html#callerPos'><b>callerPos</b></a>(<small></small>) <small><span class='type'><A class='typehref' href='Z.Pos.html'>Z.Pos</A></span></small><span class='attribute'><small> @public</small></span>&nbsp;</td>
<td> Return the code position of the calling method.
</td>
</tr>
<tr><td align='right'></td><td class='nowrap'><A href='Z.html#backtrace'><b>backtrace</b></a>(<small></small>) <small><span class='type'><A class='typehref' href='LIST.list.html'>list</A>&lt;<A class='typehref' href='Z.Pos.html'>Z.Pos</A>&gt;</span></small><span class='attribute'><small> @public</small></span>&nbsp;</td>
<td> Return the stack backtrace, the list of code positions that brought us to
 the current position.
</td>
</tr>
<tr><td align='right'></td><td class='nowrap'><A href='Z.html#backtrace'><b>backtrace</b></a>(<small>skip</small>) <small><span class='type'><A class='typehref' href='LIST.list.html'>list</A>&lt;<A class='typehref' href='Z.Pos.html'>Z.Pos</A>&gt;</span></small><span class='attribute'><small> @public</small></span>&nbsp;</td>
<td> Return the stack backtrace, just like backtrace(), but skip the first
 <b>skip</b> entries.
</td>
</tr>
<tr><td align='right'></td><td class='nowrap'><A href='Z.html#have'><b>have</b></a>(<small>feature</small>) <small><span class='type'><A class='typehref' href='BOOL.bool.html'>bool</A></span></small><span class='attribute'><small> @public</small></span>&nbsp;</td>
<td> Return TRUE when <b>feature</b> is supported.
</td>
</tr>
<tr><td>&nbsp;</td></tr></table></td></tr></table>
<h2>members (alphabetically)</h2>
<table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><p><span class='type'><A class='typehref' href='BOOL.bool.html'>bool</A></span>&nbsp;<A name='exiting'><b>exiting</b></A><span class='attribute'> @public</span></p><table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><p class='ptext'> Set to TRUE when exiting the program.
</p>
<p class='ptext'> Useful in a Finish method.
<p class='ptext'> Example:
<pre class='example'> IF $done || Z.exiting
   $cleanup()
 }
</pre>
<p class='ptext'>
</p>
</td></tr></table><p><span class='type'><A class='typehref' href='STRING.string.html'>string</A></span>&nbsp;<A name='lang'><b>lang</b></A><span class='attribute'> @public</span></p><table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><p class='ptext'> The language currently being generated: "C" or "JS"
</p>
<p class='ptext'> For example, to generate code for JavaScript only:
<pre class='example'> GENERATE_IF Z.lang == "JS"
 &gt;&gt;&gt;
   javascript code
 &lt;&lt;&lt;
 }
</pre>
<p class='ptext'>
</p>
</td></tr></table><p class='pheader'><span class='keyword'>FUNC</span> <A name='backtrace'><b>backtrace</b></A>() <span class='type'><A class='typehref' href='LIST.list.html'>list</A>&lt;<A class='typehref' href='Z.Pos.html'>Z.Pos</A>&gt;</span><span class='attribute'> @public</span></p><table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><p class='ptext'> Return the stack backtrace, the list of code positions that brought us to
 the current position.
</p>
<p class='ptext'> The position where Z.backtrace() is invoked is the first position, index
 zero in the list.  The last position is a call from Main().
<p class='ptext'> When Z.have("backtrace") is FALSE then NIL is returned.
 When used in a method with <A href='Z.backtrace=no.html'><b>backtrace=no</b></A> a compilation error is
 produced.
<p class='ptext'> Not yet available for Javascript, NIL is returned.
<p class='ptext'> Example:
<pre class='example'> FOR p IN Z.backtrace()
   IO.print(p.ToString() .. ": " .. p.text)
 }
</pre>
<p class='ptext'>
</p>
</td></tr></table><p class='pheader'><span class='keyword'>FUNC</span> <A name='backtrace'><b>backtrace</b></A>(<span class='type'><A class='typehref' href='INT.int.html'>int</A></span> skip) <span class='type'><A class='typehref' href='LIST.list.html'>list</A>&lt;<A class='typehref' href='Z.Pos.html'>Z.Pos</A>&gt;</span><span class='attribute'> @public</span></p><table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><p class='ptext'> Return the stack backtrace, just like backtrace(), but skip the first
 <b>skip</b> entries.
</p>
<p class='ptext'> To omit the position this function is called use Z.backtrace(1).
</p>
</td></tr></table><p class='pheader'><span class='keyword'>FUNC</span> <A name='callerPos'><b>callerPos</b></A>() <span class='type'><A class='typehref' href='Z.Pos.html'>Z.Pos</A></span><span class='attribute'> @public</span></p><table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><p class='ptext'> Return the code position of the calling method.
</p>
<p class='ptext'> When Z.have("backtrace") is FALSE then NIL is returned.
<p class='ptext'> Not yet available for Javascript, NIL is returned.

 Example:
<pre class='example'> PROC getAtIndex(int idx)
   if idx &lt; 0
     THROW NEW("idx invalid", Z.callerPos())
   }
 }
</pre>
<p class='ptext'>
</p>
</td></tr></table><p class='pheader'><span class='keyword'>FUNC</span> <A name='have'><b>have</b></A>(<span class='type'><A class='typehref' href='STRING.string.html'>string</A></span> feature) <span class='type'><A class='typehref' href='BOOL.bool.html'>bool</A></span><span class='attribute'> @public</span></p><table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><p class='ptext'> Return TRUE when <b>feature</b> is supported.
</p>
<p class='ptext'> Known features are:
<p class='ptext'> "backtrace"  - Wether stack backtrace is available
<p class='ptext'> "resolve"    - Wether IO.resolve() is available
<p class='ptext'> "fork"       - Wether fork() is available
<p class='ptext'> "sigaction"  - Wether sigaction() is available
<p class='ptext'> "portable"   - Whether compiling with --portable
<p class='ptext'> "keepunused" - Whether compiling with --keepunused
<p class='ptext'> "managed"    - Whether memory is being managed
<p class='ptext'> "mswindows"  - Whether running on MS-Windows
<p class='ptext'> Example:
<pre class='example'> GENERATE_IF Z.have("resolve")
   fname = IO.resolve(fname)
 }
</pre>
<p class='ptext'>
</p>
</td></tr></table><p class='pheader'><span class='keyword'>FUNC</span> <A name='pos'><b>pos</b></A>() <span class='type'><A class='typehref' href='Z.Pos.html'>Z.Pos</A></span><span class='attribute'> @public</span></p><table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><p class='ptext'> Return the current position in the code.
</p>
<p class='ptext'> This is generated at compile time.
<p class='ptext'> Example:
<pre class='example'> THROW NEW("something wrong here", Z.pos())
</pre>
<p class='ptext'>
</p>
</td></tr></table></td></tr></table><h2>license
</h2>
<table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td> Copyright 2010 Bram Moolenaar  All Rights Reserved.
</td></tr></table><h2>
</h2>
<table width=1000><tr><td width=40>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td> Licensed under the Apache License, Version 2.0.  See the LICENSE file or
 obtain a copy at: http://www.apache.org/licenses/LICENSE-2.0
<p class='ptext'></td></tr></table></body></html>
